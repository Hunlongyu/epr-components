var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,u=(n,t,l)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[t]=l;import{d as o,r,o as i,c as p,a as c,w as m,b as d,e as v,v as f,f as x,g as b,t as g,h,i as y,F as E,j as N}from"./vendor.6311d729.js";var M=o({name:"epr-slider-button",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Array,default:[1,"5%","10%"]},precision:{type:Number,default:2}},emits:["change"],setup(e,{emit:n}){const t=r(),l=r();let s=0,a=0,u=0,o=0,p=!1,c=0;function m(){const e=window.getComputedStyle(t.value).left;return Number(e.replace("px",""))}function d(){const t=m(),l=(e.max-e.min)*t/(a-s)+e.min;n("change",function(n){const t=e.precision,l=new RegExp(`^(.*\\..{${t}}).*$`);return+n.toString().replace(l,"$1")}(l))}return i((()=>{!function(){if(a=l.value.offsetWidth,s=t.value.offsetWidth,e.modelValue<e.min||e.modelValue>e.max)return console.error("[EPR SLIDER BUTTON]: 当前值不能小于最小值或大于最大值");{const n=e.modelValue*(a-s)/(e.max-e.min);t.value.style.left=n+"px"}}()})),{track:l,slider:t,handleChange:function(n){const l=m(),u=e.step[0];let o=0;if("string"==typeof u)o=u.includes("%")?(a-s)*Number(u.replace("%",""))/100:Number(u)*(a-s)/(e.max-e.min);else{if("number"!=typeof u)return console.error('[EPR SLIDER BUTTON]: 步进的值只能为：整数，数字型字符串 或 带百分号的字符串，如：[1, "2", "5%"]');o=u*(a-s)/(e.max-e.min)}"left"===n&&(t.value.style.left=l-o<0?"0px":l-o+"px"),"right"===n&&(t.value.style.left=l+s+o<a?l+o+"px":a-s+"px"),d()},mousedownEvent:function(n){u=setTimeout((()=>{!function(n){u=0;const l=n.offsetX,r=e.step[2];let i=0;if("string"==typeof r)i=r.includes("%")?(a-s)*Number(r.replace("%",""))/100:Number(r)*(a-s)/(e.max-e.min);else{if("number"!=typeof r)return console.error('[EPR SLIDER BUTTON]: 步进的值只能为：整数，数字型字符串 或 带百分号的字符串，如：[1, "2", "5%"]');i=r*(a-s)/(e.max-e.min)}o=setInterval((()=>{const e=m();t.value.style.left=l>e?e+i<a-s?e+i+"px":a-s+"px":e-i>0?e-i+"px":"0px",d()}),250)}(n)}),300)},mouseupEvent:function(n){if(clearTimeout(u),clearInterval(o),0!==u){const l=n.offsetX,u=m(),o=e.step[1];let r=0;if("string"==typeof o)r=o.includes("%")?(a-s)*Number(o.replace("%",""))/100:Number(o)*(a-s)/(e.max-e.min);else{if("number"!=typeof o)return console.error('[EPR SLIDER BUTTON]: 步进的值只能为：整数，数字型字符串 或 带百分号的字符串，如：[1, "2", "5%"]');r=o*(a-s)/(e.max-e.min)}t.value.style.left=l>u?u+r<a-s?u+r+"px":a-s+"px":u-r>0?u-r+"px":"0px",d()}},clearTimer:function(){clearTimeout(u),clearInterval(o)},sliderMouseDown:function(e){p=!0;const n=m();c=e.clientX-n},sliderMouseMove:function(e){p&&(e.clientX-c<0?t.value.style.left="0px":e.clientX-c>a-s?t.value.style.left=a-s+"px":t.value.style.left=e.clientX-c+"px",d())},sliderMouseUp:function(){p=!1},sliderMouseOut:function(){p=!1}}}});const w={class:"epr-btn"},C=c("span",{class:"math-minus"},null,-1),R=c("span",{class:"math-plus"},null,-1);M.render=function(e,n,t,l,s,a){return d(),p("div",w,[c("span",{class:"epr-btn-reduce",onClick:n[1]||(n[1]=n=>e.handleChange("left"))},[C]),c("span",{class:"epr-btn-track",onMousedown:n[6]||(n[6]=m(((...n)=>e.mousedownEvent&&e.mousedownEvent(...n)),["self"])),onMouseup:n[7]||(n[7]=m(((...n)=>e.mouseupEvent&&e.mouseupEvent(...n)),["self"])),onMouseout:n[8]||(n[8]=(...n)=>e.clearTimer&&e.clearTimer(...n)),ref:"track"},[c("span",{class:"epr-btn-slider",ref:"slider",onMousedown:n[2]||(n[2]=(...n)=>e.sliderMouseDown&&e.sliderMouseDown(...n)),onMouseup:n[3]||(n[3]=(...n)=>e.sliderMouseUp&&e.sliderMouseUp(...n)),onMousemove:n[4]||(n[4]=(...n)=>e.sliderMouseMove&&e.sliderMouseMove(...n)),onMouseout:n[5]||(n[5]=(...n)=>e.sliderMouseOut&&e.sliderMouseOut(...n))},null,544)],544),c("span",{class:"epr-btn-increase",onClick:n[9]||(n[9]=n=>e.handleChange("right"))},[R])])};var I=o({name:"epr-slider-input",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{default:[1,1]},precision:{type:Number,default:2}},emits:["change"],setup(e,{emit:n}){const t=r(0);function l(n){const l=e.precision,s=new RegExp(`^(.*\\..{${l}}).*$`),a=n.toString().replace(s,"$1");return t.value=+a,+a}return i((()=>{!function(){if(e.modelValue<e.min||e.modelValue>e.max)return console.error("[EPR SLIDER INPUT]: 当前值不能小于最小值或大于最大值");t.value=e.modelValue}()})),{value:t,keyEvent:function(s){e.step[1]&&("down"===s&&(t.value-e.step[1]>=e.min?t.value-=e.step[1]:t.value=e.min),"up"===s&&(t.value+e.step[1]<=e.max?t.value+=e.step[1]:t.value=e.max),n("change",l(t.value)))},changeEvent:function(s){const a=s.target.value;if(isNaN(Number(a))){t.value=0;n("change",0,"[EPR SLIDER INPUT]: 输入的值错误，请检查后输入")}else{const s=Number(a);if(s>e.max||s<e.min){const e="[EPR SLIDER INPUT]: 输入的值不能小于最小值或大于最大值，请检查后输入";t.value=0,n("change",0,e)}else t.value=s,n("change",l(s))}},handleChange:function(s){"left"===s&&(t.value-e.step[0]>=e.min?t.value-=e.step[0]:t.value=e.min),"right"===s&&(console.log(typeof t.value,typeof e.step[0],t.value,e.step[0],e.precision),t.value+e.step[0]<=e.max?t.value-=-e.step[0]:t.value=e.max),n("change",l(t.value))}}}});const P={class:"epr-btn"},T=c("span",{class:"math-minus"},null,-1),O={class:"epr-btn-content"},S=c("span",{class:"math-plus"},null,-1);I.render=function(e,n,t,l,s,a){return d(),p("div",P,[c("span",{class:"epr-btn-reduce",onClick:n[1]||(n[1]=n=>e.handleChange("left"))},[T]),c("span",O,[v(c("input",{class:"epr-btn-input","onUpdate:modelValue":n[2]||(n[2]=n=>e.value=n),type:"text",onChange:n[3]||(n[3]=(...n)=>e.changeEvent&&e.changeEvent(...n)),onKeydown:[n[4]||(n[4]=x((n=>e.keyEvent("down")),["down"])),n[5]||(n[5]=x((n=>e.keyEvent("up")),["up"]))]},null,544),[[f,e.value]])]),c("span",{class:"epr-btn-increase",onClick:n[6]||(n[6]=n=>e.handleChange("right"))},[S])])};var V=o({name:"App",components:{eprSliderButton:M,eprSliderInput:I},setup(){const e=b({min:0,max:100,step:[1,"2","3%"],step2:[1,2],value:50,value2:50,precision:2});return o=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&u(e,t,n[t]);if(l)for(var t of l(n))a.call(n,t)&&u(e,t,n[t]);return e})({},g(e)),n(o,t({sliderBtnChange:function(n){e.value=n},sliderInputChange:function(n,t){e.value2=n,t&&console.log(t)}}));var o}});const U=c("h1",null,"EPR Components",-1),D={class:"box"},k=c("div",{class:"title"},"EPR Slider Button",-1),j={class:"value"},B={class:"item"},L={class:"box"},X=c("div",{class:"title"},"EPR Slider Input",-1),$={class:"value"},A={class:"item"};V.render=function(e,n,t,l,s,a){const u=h("epr-slider-button"),o=h("epr-slider-input");return d(),p(E,null,[U,c("div",D,[k,c("div",j,"min: "+y(e.min)+" value: "+y(e.value)+" max: "+y(e.max)+" step: "+y(e.step)+" precision: "+y(e.precision),1),c("div",B,[c(u,{min:e.min,max:e.max,step:e.step,modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=n=>e.value=n),precision:e.precision,onChange:e.sliderBtnChange},null,8,["min","max","step","modelValue","precision","onChange"])])]),c("div",L,[X,c("div",$,"min: "+y(e.min)+" value: "+y(e.value2)+" max: "+y(e.max)+" step: "+y(e.step2)+" precision: "+y(e.precision),1),c("div",A,[c(o,{min:e.min,max:e.max,step:e.step2,modelValue:e.value2,"onUpdate:modelValue":n[2]||(n[2]=n=>e.value2=n),precision:e.precision,onChange:e.sliderInputChange},null,8,["min","max","step","modelValue","precision","onChange"])])])],64)},N(V).mount("#app");
