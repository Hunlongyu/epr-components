var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,u=(n,t,l)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[t]=l;import{d as r,r as o,o as i,c as p,a as c,w as m,b as d,e as f,v,f as b,g as x,t as y,h,F as g,i as E}from"./vendor.f12c8b32.js";var M=r({name:"epr-slider-button",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Array,default:[1,"5%","10%"]},precision:{type:Number,default:2}},emits:["change"],setup(e,{emit:n}){const t=o(),l=o();let s=0,a=0,u=0,r=0,p=!1,c=0;function m(){const e=window.getComputedStyle(t.value).left;return Number(e.replace("px",""))}function d(){const t=m(),l=(e.max-e.min)*t/(a-s)+e.min;n("change",function(n){const t=e.precision,l=new RegExp(`^(.*\\..{${t}}).*$`);return+n.toString().replace(l,"$1")}(l))}return i((()=>{!function(){if(a=l.value.offsetWidth,s=t.value.offsetWidth,e.modelValue<e.min||e.modelValue>e.max)return console.error("[EPR SLIDER BUTTON]: 当前值不能小于最小值或大于最大值");{const n=e.modelValue*(a-s)/(e.max-e.min);t.value.style.left=n+"px"}}()})),{track:l,slider:t,handleChange:function(n){const l=m(),u=e.step[0];let r=0;if("string"==typeof u)r=u.includes("%")?(a-s)*Number(u.replace("%",""))/100:Number(u)*(a-s)/(e.max-e.min);else{if("number"!=typeof u)return console.error('[EPR SLIDER BUTTON]: 步进的值只能为：整数，数字型字符串 或 带百分号的字符串，如：[1, "2", "5%"]');r=u*(a-s)/(e.max-e.min)}"left"===n&&(t.value.style.left=l-r<0?"0px":l-r+"px"),"right"===n&&(t.value.style.left=l+s+r<a?l+r+"px":a-s+"px"),d()},mousedownEvent:function(n){u=setTimeout((()=>{!function(n){u=0;const l=n.offsetX,o=e.step[2];let i=0;if("string"==typeof o)i=o.includes("%")?(a-s)*Number(o.replace("%",""))/100:Number(o)*(a-s)/(e.max-e.min);else{if("number"!=typeof o)return console.error('[EPR SLIDER BUTTON]: 步进的值只能为：整数，数字型字符串 或 带百分号的字符串，如：[1, "2", "5%"]');i=o*(a-s)/(e.max-e.min)}r=setInterval((()=>{const e=m();t.value.style.left=l>e?e+i<a-s?e+i+"px":a-s+"px":e-i>0?e-i+"px":"0px",d()}),250)}(n)}),300)},mouseupEvent:function(n){if(clearTimeout(u),clearInterval(r),0!==u){const l=n.offsetX,u=m(),r=e.step[1];let o=0;if("string"==typeof r)o=r.includes("%")?(a-s)*Number(r.replace("%",""))/100:Number(r)*(a-s)/(e.max-e.min);else{if("number"!=typeof r)return console.error('[EPR SLIDER BUTTON]: 步进的值只能为：整数，数字型字符串 或 带百分号的字符串，如：[1, "2", "5%"]');o=r*(a-s)/(e.max-e.min)}t.value.style.left=l>u?u+o<a-s?u+o+"px":a-s+"px":u-o>0?u-o+"px":"0px",d()}},clearTimer:function(){clearTimeout(u),clearInterval(r)},sliderMouseDown:function(e){p=!0;const n=m();c=e.clientX-n},sliderMouseMove:function(e){p&&(e.clientX-c<0?t.value.style.left="0px":e.clientX-c>a-s?t.value.style.left=a-s+"px":t.value.style.left=e.clientX-c+"px",d())},sliderMouseUp:function(){p=!1},sliderMouseOut:function(){p=!1}}}});const w={class:"epr-btn"},N=c("span",{class:"math-minus"},null,-1),C=c("span",{class:"math-plus"},null,-1);M.render=function(e,n,t,l,s,a){return d(),p("div",w,[c("span",{class:"epr-btn-reduce",onClick:n[1]||(n[1]=n=>e.handleChange("left"))},[N]),c("span",{class:"epr-btn-track",onMousedown:n[6]||(n[6]=m(((...n)=>e.mousedownEvent&&e.mousedownEvent(...n)),["self"])),onMouseup:n[7]||(n[7]=m(((...n)=>e.mouseupEvent&&e.mouseupEvent(...n)),["self"])),onMouseout:n[8]||(n[8]=(...n)=>e.clearTimer&&e.clearTimer(...n)),ref:"track"},[c("span",{class:"epr-btn-slider",ref:"slider",onMousedown:n[2]||(n[2]=(...n)=>e.sliderMouseDown&&e.sliderMouseDown(...n)),onMouseup:n[3]||(n[3]=(...n)=>e.sliderMouseUp&&e.sliderMouseUp(...n)),onMousemove:n[4]||(n[4]=(...n)=>e.sliderMouseMove&&e.sliderMouseMove(...n)),onMouseout:n[5]||(n[5]=(...n)=>e.sliderMouseOut&&e.sliderMouseOut(...n))},null,544)],544),c("span",{class:"epr-btn-increase",onClick:n[9]||(n[9]=n=>e.handleChange("right"))},[C])])};var O=r({name:"epr-slider-input",props:{modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{default:[1,1]},precision:{type:Number,default:2}},emits:["change"],setup(e,{emit:n}){const t=o(0);function l(n){const l=e.precision,s=new RegExp(`^(.*\\..{${l}}).*$`),a=n.toString().replace(s,"$1");return t.value=+a,+a}return i((()=>{!function(){if(e.modelValue<e.min||e.modelValue>e.max)return console.error("[EPR SLIDER INPUT]: 当前值不能小于最小值或大于最大值");t.value=e.modelValue}()})),{value:t,keyEvent:function(s){e.step[1]&&("down"===s&&(t.value-e.step[1]>=e.min?t.value-=e.step[1]:t.value=e.min),"up"===s&&(t.value+e.step[1]<=e.max?t.value+=e.step[1]:t.value=e.max),n("change",l(t.value)))},handleChange:function(s){"left"===s&&(t.value-e.step[0]>=e.min?t.value-=e.step[0]:t.value=e.min),"right"===s&&(console.log(typeof t.value,typeof e.step[0],t.value,e.step[0],e.precision),t.value+e.step[0]<=e.max?t.value-=-e.step[0]:t.value=e.max),n("change",l(t.value))}}}});const T={class:"epr-btn"},V=c("span",{class:"math-minus"},null,-1),I={class:"epr-btn-content"},R=c("span",{class:"math-plus"},null,-1);O.render=function(e,n,t,l,s,a){return d(),p("div",T,[c("span",{class:"epr-btn-reduce",onClick:n[1]||(n[1]=n=>e.handleChange("left"))},[V]),c("span",I,[f(c("input",{class:"epr-btn-input","onUpdate:modelValue":n[2]||(n[2]=n=>e.value=n),type:"text",onKeydown:[n[3]||(n[3]=b((n=>e.keyEvent("down")),["down"])),n[4]||(n[4]=b((n=>e.keyEvent("up")),["up"]))]},null,544),[[v,e.value]])]),c("span",{class:"epr-btn-increase",onClick:n[5]||(n[5]=n=>e.handleChange("right"))},[R])])};var P=r({name:"App",components:{eprSliderButton:M,eprSliderInput:O},setup(){const e=x({min:0,max:100,step:[.211,"2","3%"],step2:[.001,2],value:50,value2:30,precision:3});return r=((e,n)=>{for(var t in n||(n={}))s.call(n,t)&&u(e,t,n[t]);if(l)for(var t of l(n))a.call(n,t)&&u(e,t,n[t]);return e})({},y(e)),n(r,t({sliderBtnChange:function(n){e.value=n},sliderInputChange:function(n){e.value2=n}}));var r}});const S=c("br",null,null,-1);P.render=function(e,n,t,l,s,a){const u=h("epr-slider-button"),r=h("epr-slider-input");return d(),p(g,null,[c(u,{min:e.min,max:e.max,step:e.step,modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=n=>e.value=n),precision:e.precision,onChange:e.sliderBtnChange},null,8,["min","max","step","modelValue","precision","onChange"]),S,c(r,{min:e.min,max:e.max,step:e.step2,modelValue:e.value2,"onUpdate:modelValue":n[2]||(n[2]=n=>e.value2=n),precision:e.precision,onChange:e.sliderInputChange},null,8,["min","max","step","modelValue","precision","onChange"])],64)},E(P).mount("#app");
